<div class="container mt-4">

  <!-- üîç Formulaire de recherche -->
  <form [formGroup]="searchForm" (ngSubmit)="onSearch()" class="row g-3 align-items-end">
    <div class="col-md-3">
      <label for="ref">R√©f√©rence</label>
      <input type="text" formControlName="ref" class="form-control" id="ref" />
    </div>
    <div class="col-md-3">
      <label for="designation">D√©signation</label>
      <input type="text" formControlName="designation" class="form-control" id="designation" />
    </div>
    <div class="col-md-3">
      <label for="dateDebut">Date D√©but</label>
      <input type="date" formControlName="dateDebut" class="form-control" id="dateDebut" />
    </div>
    <div class="col-md-3">
      <label for="dateFin">Date Fin</label>
      <input type="date" formControlName="dateFin" class="form-control" id="dateFin" />
    </div>
    <div class="col-md-12 text-end">
      <button type="submit" class="btn btn-primary">Rechercher</button>
      <button type="button" class="btn btn-secondary ms-2" (click)="loadData()">R√©initialiser</button>
    </div>
  </form>

  <hr class="my-4">

  <!-- ‚ûï Formulaire d'ajout -->
  <form [formGroup]="ajoutForm" (ngSubmit)="onAdd()" class="row g-3">
    <div class="col-md-4">
      <label for="article">Article</label>
      <select class="form-select" formControlName="articleId">
        <option value="" disabled selected>-- Choisir un article --</option>
        <option *ngFor="let article of articles" [value]="article.id">
          {{ article.ref }} - {{ article.designation }}
        </option>
      </select>
    </div>
    <div class="col-md-4">
      <label for="stock">Stock</label>
      <select class="form-select" formControlName="stockId">
        <option value="" disabled selected>-- Choisir un stock --</option>
        <option *ngFor="let stock of stocks" [value]="stock.id">{{ stock.nom }}</option>
      </select>
    </div>
    <div class="col-md-2">
      <label for="quantite">Quantit√©</label>
      <input type="number" class="form-control" formControlName="quantite" />
    </div>
    <div class="col-md-2">
      <label for="dateEntree">Date</label>
      <input type="date" class="form-control" formControlName="dateEntree" />
    </div>
    <div class="col-md-12 text-end">
      <button type="submit" class="btn btn-success">Ajouter</button>
    </div>
  </form>

  <hr class="my-4">

  <!-- üìã Tableau des mouvements -->
  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead class="table-light">
        <tr>
          <th>R√©f√©rence</th>
          <th>D√©signation</th>
          <th>Quantit√©</th>
          <th>Date</th>
          <th>Stock</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let m of mouvements">
          <td>{{ m.article?.ref }}</td>
          <td>{{ m.article?.designation }}</td>
          <td>{{ m.quantite }}</td>
          <td>{{ m.dateMouvement | date: 'yyyy-MM-dd' }}</td>
          <td>{{ m.entiteStock?.nom }}</td>
        </tr>
        <tr *ngIf="mouvements.length === 0">
          <td colspan="5" class="text-center text-muted">Aucun mouvement trouv√©</td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
