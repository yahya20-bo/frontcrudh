<div class="card p-3">
  <h4 class="mb-3 text-primary">🔎 Recherche des Sorties Tissu</h4>
  <form [formGroup]="searchForm" (ngSubmit)="rechercher()" class="row g-3 align-items-end">
    <div class="col-md-4">
      <label>Article</label>
      <select class="form-control" formControlName="articleId">
        <option value="">-- Tous --</option>
        <option *ngFor="let a of articles" [value]="a.id">{{ a.designation }}</option>
      </select>
    </div>
    <div class="col-md-3">
      <label>Date min</label>
      <input type="date" class="form-control" formControlName="dateMin" />
    </div>
    <div class="col-md-3">
      <label>Date max</label>
      <input type="date" class="form-control" formControlName="dateMax" />
    </div>
    <div class="col-md-2 text-end">
      <button type="submit" class="btn btn-primary w-100">
        🔍 Rechercher
      </button>
      <button type="button" class="btn btn-secondary w-100 mt-2" (click)="annulerRecherche()">
        ❌ Réinitialiser
      </button>
    </div>
  </form>
</div>

<div class="card p-3 mt-4">
  <h4 class="mb-3 text-success">➕ Ajouter une Sortie Tissu</h4>
  <form [formGroup]="addForm" (ngSubmit)="ajouterSortie()" class="row g-3 align-items-end">
    <div class="col-md-4">
      <label>Article</label>
      <select class="form-control" formControlName="articleId">
        <option value="">-- Sélectionner --</option>
        <option *ngFor="let a of articles" [value]="a.id">{{ a.designation }}</option>
      </select>
    </div>
    <div class="col-md-4">
      <label>Stock</label>
      <select class="form-control" formControlName="entiteStockId">
        <option value="">-- Sélectionner --</option>
        <option *ngFor="let s of stocks" [value]="s.id">{{ s.designation }}</option>
      </select>
    </div>
    <div class="col-md-2">
      <label>Quantité</label>
      <input type="number" class="form-control" formControlName="quantite" />
    </div>
    <div class="col-md-2">
      <label>Date</label>
      <input type="date" class="form-control" formControlName="date" />
    </div>
    <div class="col-12 text-end">
      <button type="submit" class="btn btn-success">
        ✅ Ajouter
      </button>
    </div>
  </form>
</div>

<div class="card p-3 mt-4">
  <h4 class="mb-3 text-info">📋 Liste des Sorties</h4>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead class="table-light">
        <tr>
          <th>Article</th>
          <th>Stock</th>
          <th>Quantité</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of resultats">
          <td>{{ item.articleDesignation }}</td>
          <td>{{ item.entiteStockDesignation }}</td>
          <td>{{ item.quantite }}</td>
          <td>{{ item.date | date: 'yyyy-MM-dd' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
