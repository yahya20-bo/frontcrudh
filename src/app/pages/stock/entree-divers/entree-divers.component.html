<div class="card mb-4 p-3">
  <h5 class="mb-3">üîç Recherche des entr√©es divers</h5>
  <form [formGroup]="searchForm" (ngSubmit)="onSearch()" class="row g-3">
    <div class="col-md-3">
      <input formControlName="ref" type="text" class="form-control" placeholder="R√©f√©rence" />
    </div>
    <div class="col-md-3">
      <input formControlName="designation" type="text" class="form-control" placeholder="D√©signation" />
    </div>
    <div class="col-md-3">
      <input formControlName="dateDebut" type="date" class="form-control" />
    </div>
    <div class="col-md-3">
      <input formControlName="dateFin" type="date" class="form-control" />
    </div>
    <div class="col-12 text-end">
      <button type="submit" class="btn btn-primary me-2">Rechercher</button>
      <button type="button" class="btn btn-secondary" (click)="loadData()">R√©initialiser</button>
    </div>
  </form>
</div>

<div class="card mb-4 p-3">
  <h5 class="mb-3">‚ûï Ajouter une entr√©e divers</h5>
  <form [formGroup]="ajoutForm" (ngSubmit)="onAdd()" class="row g-3">
    <div class="col-md-3">
      <select formControlName="articleId" class="form-select">
        <option value="" disabled selected>Article</option>
        <option *ngFor="let article of articles" [value]="article.id">{{ article.designation }}</option>
      </select>
    </div>
    <div class="col-md-3">
      <select formControlName="stockId" class="form-select">
        <option value="" disabled selected>Entit√© de stock</option>
        <option *ngFor="let stock of stocks" [value]="stock.id">{{ stock.nom }}</option>
      </select>
    </div>
    <div class="col-md-3">
      <input formControlName="quantite" type="number" class="form-control" placeholder="Quantit√©" />
    </div>
    <div class="col-md-3">
      <input formControlName="dateEntree" type="date" class="form-control" />
    </div>
    <div class="col-12 text-end">
      <button type="submit" class="btn btn-success" [disabled]="ajoutForm.invalid">Ajouter</button>
    </div>
  </form>
</div>

<div class="card p-3">
  <h5 class="mb-3">üì¶ Liste des mouvements</h5>
  <div class="table-responsive">
    <table class="table table-bordered table-striped align-middle">
      <thead class="table-light">
        <tr>
          <th>R√©f</th>
          <th>D√©signation</th>
          <th>Quantit√©</th>
          <th>Stock</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let mvt of mouvements">
          <td>{{ mvt.article?.ref }}</td>
          <td>{{ mvt.article?.designation }}</td>
          <td>{{ mvt.quantite }}</td>
          <td>{{ mvt.entiteStock?.nom }}</td>
          <td>{{ mvt.dateMouvement | date: 'dd/MM/yyyy' }}</td>
        </tr>
        <tr *ngIf="mouvements.length === 0">
          <td colspan="5" class="text-center text-muted">Aucun mouvement trouv√©</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
